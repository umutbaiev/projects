{"version":3,"sources":["index.js"],"names":["$","document","on","parent","this","parents","id","data","post","remove","console","log","e","elem","dropdown","next","classes","target","classList","dropdowns","siblings","find","contains","stop","slideToggle","slideUp","tbody","getJSON","done","each","key","user","sym","append","name","substring","phone","date","message","btn","save_btn","text","removeAttr","attr","edit_btn","btns","text_msg","val"],"mappings":"AAAAA,EAAAC,UAAAC,GAAA,QAAA,mBAAA,WACA,IACAC,EADAH,EAAAI,MACAC,QAAA,eACAC,EAAAH,EAAAI,KAAA,MAGAP,EAAAQ,KAAA,kCAAA,CAAAF,GAAAA,IAAA,SAAAC,GACAJ,EAAAM,SACAC,QAAAC,IAAAJ,SAIAP,EAAAC,UAAAC,GAAA,QAAA,qBAAA,SAAAU,GACA,IAAAC,EAAAb,EAAAI,MACAU,EAAAD,EAAAE,OACAC,EAAAJ,EAAAK,OAAAC,UAEAC,EADAN,EAAAR,QAAA,eACAe,WAAAC,KAAA,aAEAL,EAAAM,SAAA,aACAR,EAAAS,OAAAC,YAAA,KACAL,EAAAI,OAAAE,QAAA,SAIA,IAAAC,EAAA1B,EAAA,eAAAqB,KAAA,gBAIArB,EAAA2B,QAAA,uBACAC,MACA,SAAArB,GACAP,EAAA6B,KAAAtB,GAAA,SAAAuB,EAAAC,GAgCA,IAAAC,EA/BAN,EAAAO,OAAA,0DACAF,EAAAzB,kGAEAyB,EAAAzB,uHA4BA0B,EA1BAD,EAAAG,KA2BAF,EAAAG,UAAA,EAAA,6CA1BAJ,EAAAG,4FAEAH,EAAAK,+DACAL,EAAAM,wOAIAN,EAAAO,0iBAsBAtC,EAAAC,UAAAC,GAAA,QAAA,aAAA,WACA,IAAAqC,EAAAvC,EAAAI,MACAoC,EAAAD,EAAAnB,SAAA,aAEAqB,EADAF,EAAAlC,QAAA,SACAe,SAAA,YAEApB,EAAAwC,GAAAE,WAAA,YACA1C,EAAAyC,GAAAC,WAAA,YACA1C,EAAAuC,GAAAI,KAAA,YAAA,MAIA3C,EAAAC,UAAAC,GAAA,QAAA,aAAA,WACA,IAAAqC,EAAAvC,EAAAI,MACAwC,EAAAL,EAAAnB,SAAA,aACAyB,EAAAN,EAAAlC,QAAA,SACAC,EAAAiC,EAAAlC,QAAA,eAAAE,KAAA,MACAkC,EAAAI,EAAAzB,SAAA,YACA0B,EAAAL,EAAAM,MAEA/C,EAAAQ,KAAA,6BAAA,CAAAF,GAAAA,EAAAwC,SAAAA,IAAA,SAAAvC,GACAP,EAAAuC,GAAAI,KAAA,YAAA,GACA3C,EAAAyC,GAAAE,KAAA,YAAA,GACA3C,EAAA4C,GAAAF,WAAA,YAEAhC,QAAAC,IAAAJ","file":"../custom/scripts.js","sourcesContent":["$(document).on('click', '.delete-request', function(){\r\n    var elem = $(this),\r\n        parent = elem.parents('.table-item'),\r\n        id = parent.data('id')\r\n     \r\n\r\n    $.post('../../../php/delete_request.php', {id: id}, function(data) {\r\n        parent.remove()\r\n        console.log(data);\r\n    })\r\n})\r\n\r\n$(document).on('click','.table-item .info', function(e) {\r\n    var elem = $(this),\r\n        dropdown = elem.next(),\r\n        classes = e.target.classList,\r\n        parent = elem.parents('.table-item'),\r\n        dropdowns = parent.siblings().find('.dropdown')\r\n\r\n    if(!classes.contains('prevent')) {\r\n        dropdown.stop().slideToggle(300)\r\n        dropdowns.stop().slideUp(300)\r\n    }\r\n})\r\n\r\nlet tbody = $('.table-body').find('.table-items')\r\n\r\nfunction table_items() {\r\n\r\n    $.getJSON(\"../../../users.json\")\r\n    .done(\r\n        function (data) {\r\n            $.each(data, function(key, user) {\r\n                tbody.append(`\r\n                    <div class=\"table-item\" data-id=\"${user.id}\">\r\n                        <div class=\"info\">\r\n                            <div class=\"id\">#${user.id}</div>\r\n                            <div class=\"name\">\r\n                                <div class=\"avatar small\">${first_symbol(user.name)}</div>\r\n                                ${user.name}\r\n                            </div>\r\n                            <div class=\"phone\">${user.phone}</div> \r\n                            <div class=\"date\">${user.date}</div>\r\n                        </div>\r\n                        <div class=\"dropdown\">\r\n                        \r\n                            <textarea name=\"message\" id=\"message\" class=\"message\" cols=\"30\" rows=\"10\" readonly>${user.message}</textarea>\r\n                            <div class=\"btns\">\r\n                                <div class=\"line\">\r\n                                    <button class=\"btn delete-request\">Удалить</button>\r\n                                    <button class=\"btn btn-edit\">Редактировать</button>\r\n                                    <button class=\"btn btn-save\" disabled>Сохранить</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                `)\r\n            })\r\n        }\r\n    )\r\n}\r\n\r\ntable_items()\r\n\r\nfunction first_symbol(sym) { \r\n    return sym.substring(0, 1);\r\n}\r\n \r\n$(document).on('click', '.btn-edit', function() {\r\n    let btn = $(this),\r\n        save_btn = btn.siblings('.btn-save'),\r\n        btns = btn.parents('.btns'),\r\n        text = btns.siblings('.message')\r\n\r\n    $(save_btn).removeAttr('disabled') \r\n    $(text).removeAttr('readonly')\r\n    $(btn).attr('disabled', true)\r\n})\r\n\r\n\r\n$(document).on('click', '.btn-save', function() {\r\n    let btn = $(this),\r\n        edit_btn = btn.siblings('.btn-edit'),\r\n        btns = btn.parents('.btns'),\r\n        id = btn.parents('.table-item').data('id'),\r\n        text = btns.siblings('.message'),\r\n        text_msg =  text.val()\r\n    \r\n    $.post('../../../php/save_edit.php', {id: id, text_msg: text_msg}, function(data) {\r\n        $(btn).attr('disabled', true)\r\n        $(text).attr('readonly', true)\r\n        $(edit_btn).removeAttr('disabled')\r\n\r\n        console.log(data); \r\n    })\r\n})\r\n\r\n\r\n"]}